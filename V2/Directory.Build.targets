<Project>
  <!--
    Directory.Build.props is imported before each project file, so conditions based on properties
    set inside individual .csproj files (like IsTestProject) may not evaluate as expected.

    Directory.Build.targets is imported after each project file, so it can reliably apply
    test-only overrides.
  -->
  <PropertyGroup Condition="'$(IsTestProject)' == 'true'">
    <!-- Test projects are not part of the public shipping surface; avoid requiring XML docs here. -->
    <GenerateDocumentationFile>false</GenerateDocumentationFile>
    <NoWarn>$(NoWarn);CS1591</NoWarn>
  </PropertyGroup>

  <!--
    Marker constant for analyzers:
    Set for non-test projects that multi-target netstandard + a modern .NET TFM.
    This is defined here (not in Directory.Build.props) so it doesn't get overwritten
    by SDK defaults later in evaluation.
  -->
  <PropertyGroup Condition="'$(IsTestProject)' != 'true' AND '$(TargetFrameworks)' != '' AND $([System.String]::Copy('$(TargetFrameworks)').Contains('netstandard')) AND $([System.String]::Copy('$(TargetFrameworks)').Contains(';'))">
    <DefineConstants>$(DefineConstants);COSESIGNTOOL_MULTITARGET_NETSTANDARD</DefineConstants>
  </PropertyGroup>
</Project>
